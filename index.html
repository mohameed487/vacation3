<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة الإجازات</title>

    <!-- ربط ملف Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- ربط ملف CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- ربط ملف JavaScript -->
    <script src="app.js" defer></script>
</head>
<body>
    <div id="app">
        <h1>إدارة الإجازات</h1>

        <!-- حقول الإدخال -->
        <input type="text" id="employeeName" placeholder="أدخل اسم الموظف">
        <input type="number" id="vacationDays" placeholder="عدد الأيام">
        <input type="text" id="vacationType" placeholder="نوع الإجازة">
        <button onclick="addVacation()">إضافة إجازة</button>

        <!-- عرض سجل الإجازات -->
        <table id="vacationTable">
            <thead>
                <tr>
                    <th>الاسم</th>
                    <th>عدد الأيام</th>
                    <th>نوع الإجازة</th>
                    <th>الإجراء</th>
                </tr>
            </thead>
            <tbody>
                <!-- الإجازات ستعرض هنا -->
            </tbody>
        </table>

        <!-- عرض جميع الإجازات داخل التطبيق -->
        <div>
            <button onclick="showAllVacations()">عرض جميع الإجازات</button>
            <div id="vacationReport"></div>
        </div>

    </div>

    <script>
        // تسجيل الـ Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(function(registration) {
                console.log('Service Worker registered with scope: ', registration.scope);
            }).catch(function(error) {
                console.log('Service Worker registration failed: ', error);
            });
        }

        // نموذج لتحميل البيانات وإضافة إجازات وحفظها في localStorage
        const vacations = JSON.parse(localStorage.getItem('vacations')) || [];

        function addVacation() {
            const name = document.getElementById('employeeName').value;
            const days = parseInt(document.getElementById('vacationDays').value);
            const type = document.getElementById('vacationType').value;

            // إضافة الإجازة إلى البيانات
            vacations.push({ name, days, type });
            localStorage.setItem('vacations', JSON.stringify(vacations));
            updateVacationTable();
        }

        // تحديث جدول الإجازات في الواجهة
        function updateVacationTable() {
            const tbody = document.querySelector('#vacationTable tbody');
            tbody.innerHTML = '';
            vacations.forEach((vacation, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${vacation.name}</td>
                    <td>${vacation.days}</td>
                    <td>${vacation.type}</td>
                    <td><button onclick="deleteVacation(${index})">حذف</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        // حذف إجازة
        function deleteVacation(index) {
            vacations.splice(index, 1);
            localStorage.setItem('vacations', JSON.stringify(vacations));
            updateVacationTable();
        }

        // عرض جميع الإجازات
        function showAllVacations() {
            const vacationReport = document.getElementById('vacationReport');
            vacationReport.innerHTML = '';
            vacations.forEach(vacation => {
                const reportItem = document.createElement('p');
                reportItem.textContent = `الاسم: ${vacation.name}, الأيام: ${vacation.days}, النوع: ${vacation.type}`;
                vacationReport.appendChild(reportItem);
            });
        }

        // عند تحميل الصفحة، تحديث الجدول
        window.onload = updateVacationTable;
    </script>
</body>
</html>